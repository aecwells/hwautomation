# Pre-commit configuration for HWAutomation
# Simplified configuration to focus on essential formatting
# Additional quality checks can be added incrementally

repos:
# Code formatting with black
- repo: https://github.com/psf/black
  rev: 25.1.0
  hooks:
  - id: black
    name: Code formatting (black)
    description: Auto-format Python code with black
    language_version: python3
    args: [ --line-length=88, --target-version=py39 ]

# Import sorting with isort
- repo: https://github.com/pycqa/isort
  rev: 6.0.1
  hooks:
  - id: isort
    name: Import sorting (isort)
    description: Sort Python imports
    args: [ --profile=black, --line-length=88 ]

# Basic file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v6.0.0
  hooks:
  - id: trailing-whitespace
    name: Remove trailing whitespace
    description: Remove trailing whitespace from files
  - id: end-of-file-fixer
    name: Fix file endings
    description: Ensure files end with a newline
  - id: check-yaml
    name: Validate YAML syntax
    description: Check YAML files for syntax errors
  - id: check-merge-conflict
    name: Check for merge conflicts
    description: Check for merge conflict markers
  - id: check-ast
    name: Check Python AST
    description: Check Python files compile correctly

# Frontend code quality checks
- repo: local
  hooks:
  - id: eslint-frontend
    name: ESLint for frontend JavaScript
    description: Lint JavaScript files with ESLint
    entry: npm run lint
    language: system
    files: ^src/hwautomation/web/frontend/.*\.(js|jsx)$
    pass_filenames: false
  - id: prettier-frontend
    name: Prettier for frontend files
    description: Format JavaScript/CSS files with Prettier
    entry: npm run format:check
    language: system
    files: ^src/hwautomation/web/frontend/.*\.(js|jsx|css|json)$
    pass_filenames: false

# Global pre-commit configuration
default_language_version:
  python: python3

# Global exclude patterns
exclude: |
  (?x)^(
      .*\.egg-info/.*|
      .*/__pycache__/.*|
      .*/\.pytest_cache/.*|
      .*/\.mypy_cache/.*|
      .*/\.coverage|
      .*\.pyc$|
      .*\.pyo$|
      .*/build/.*|
      .*/dist/.*|
      .*/\.tox/.*|
      .*/\.venv/.*|
      .*/venv/.*|
      .*/hwautomation-env/.*|
      examples/.*|
      .*\.db$|
      .*\.backup$|
      .*/static/.*\.min\..*|
      .*/node_modules/.*
  )$

# Performance settings
fail_fast: false
minimum_pre_commit_version: '3.0.0'
